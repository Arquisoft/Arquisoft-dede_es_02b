[[section-runtime-view]]
== Vista en tiempo de ejecución

=== Añadir producto al carrito

[plantuml,"Diagrama Añadir producto",png]
----
actor Cliente
participant Carrito
Cliente -> Carrito: Petición de autenticación
Carrito -> Cliente: Respuesta de autenticación
Cliente -> Carrito: Añadir productos al carrito
note across: Tras hacer esto, la lista del carrito tendrá guardado dicho producto
Cliente -> Carrito: Entrar al carrito
Carrito -> Cliente: Visualizar carrito
----

=== Eliminar producto del carrito.

[plantuml,"Diagrama Eliminar Producto",png]
----
actor Cliente
participant Carrito
Cliente -> Carrito: Entrar al carrito
Carrito -> Cliente: Mostrar carrito
Cliente -> Carrito: Eliminar el producto seleccionado
note across: Tras hacer esto, la lista del carrito dejará de mostrar dicho producto
Carrito -> Cliente: Se actualiza el carrito
----

=== Inicio de sesión

[plantuml,"Diagrama Inicio de sesión",png]
----
actor Cliente
participant Frontend
participant Backend
Cliente -> Frontend: Introducir credenciales
Frontend -> Backend: Petición de inicio de sesión
alt El usuario existe
    Backend -> Frontend: Devuelve el usuario
    Frontend -> Cliente: Sesión iniciada
else El usuario no existe
    Backend -> Frontend: Error en la autenticación
end
----

=== Registrarse en el sistema

[plantuml,"Diagrama Registro",png]
----
actor Cliente
participant Frontend
participant Backend
Cliente -> Frontend: Introducir correo
Frontend -> Backend: Petición de registro de correo
alt El usuario existe
    Backend -> Frontend: Rechaza el correo
    Frontend -> Cliente: Avisa al usuario
else El usuario no existe
    Backend -> Frontend: Admite el correo
    Frontend -> Cliente: Pide más datos
    Frontend -> Backend: Introduce datos
    Backend -> Frontend: Registra al usuario
    Frontend -> Cliente: Sesión iniciada y registrado
end
----


=== Ver pedidos del usuario

[plantuml,"Ver pedidos",png]
----
actor Cliente
participant "Interfaz de Usuario"
database "POD"
Cliente -> "Interfaz de Usuario": Ver pedidos
"Interfaz de Usuario" -> "POD": Obtener pedidos
"POD" -> "Interfaz de Usuario": Devolver pedidos
"Interfaz de Usuario" -> "Interfaz de Usuario": Mostrar pedidos
----

=== Ver ventas realizadas

[plantuml,"Ver ventas realizadas",png]
----
actor Administrador
participant "DeDe"
database "MongoDB"
Administrador -> "DeDe": Ver ventas realizadas
"DeDe" -> "MongoDB": Obtener ventas
"MongoDB" -> "DeDe": Devolver ventas
"DeDe" -> "Administrador": Mostrar pedidos
----

